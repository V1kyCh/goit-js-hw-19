const e=document.querySelector(".movies-list"),t=t=>{let n=t.map(e=>`<li class="movies-item" id="${e.id}">
            <h2 class="movies-name">${e.title}</h2>
            <p class="movies-genre">${e.genre}</p>
            <p class="movies-director">${e.director}</p>
            <p class="movies-year">${e.year}</p>
             <div class="container">
            <button class="delete-btn" type="button">delete</button>
            <button class="edit-btn" type="button">edit</button>
            <button class="edit-part-btn">partially change</button>
             </div>
        </li>`).join("");e.insertAdjacentHTML("beforeend",n)},n=(e,t)=>{fetch(`http://localhost:3000/movies/${t}`,{method:"PUT",body:JSON.stringify(e),headers:{"Content-Type":"application/json; charset=UTF-8"}}).then(e=>e.json()).then(e=>e).catch(e=>console.log("ERROR"+e))},l=()=>{let e;let t=document.querySelector(".backdrop-edit"),l=document.querySelectorAll(".edit-btn"),a=document.querySelector(".edit-form-data");l.forEach(n=>{n.addEventListener("click",n=>{t.classList.remove("is-hidden"),e=n.target.parentElement.parentElement.id})}),a.addEventListener("submit",l=>{l.preventDefault(),t.classList.add("is-hidden"),n({title:`${a.elements.name.value}`,genre:`${a.elements.genre.value}`,director:`${a.elements.director.value}`,year:`${a.elements.year.value}`},e)}),document.querySelector(".close-edit-modal").addEventListener("click",()=>{t.classList.add("is-hidden")})},a=(e,t)=>{console.log(e),fetch(`http://localhost:3000/movies/${t}`,{method:"PATCH",body:JSON.stringify(e),headers:{"Content-Type":"application/json; charset=UTF-8"}}).then(e=>e.json()).then(e=>console.log(e)).catch(e=>console.log("ERROR"+e))},o=()=>{let e;let t=document.querySelector(".backdrop-edit-part"),n=document.querySelectorAll(".edit-part-btn"),l=document.querySelector(".edit-part-form-data");n.forEach(n=>{n.addEventListener("click",n=>{t.classList.remove("is-hidden"),e=n.target.parentElement.parentElement.id})}),l.addEventListener("submit",n=>{n.preventDefault(),t.classList.add("is-hidden");let o={};""!==l.elements.name.value&&(o.title=`${l.elements.name.value}`,l.elements.name.value=""),""!==l.elements.genre.value&&(o.genre=`${l.elements.genre.value}`,l.elements.genre.value=""),""!==l.elements.director.value&&(o.director=`${l.elements.director.value}`,l.elements.director.value=""),""!==l.elements.year.value&&(o.year=`${l.elements.year.value}`,l.elements.year.value=""),a(o,e)}),document.querySelector(".close-edit-part-modal").addEventListener("click",()=>{t.classList.add("is-hidden")})},s=e=>fetch(`http://localhost:3000/movies/${e}`,{method:"DELETE"}).then(e=>e).catch(e=>console.log("Error:",e)),r=()=>{document.querySelectorAll(".delete-btn").forEach(e=>{e.addEventListener("click",()=>{s(e.parentElement.parentElement.id)})})},d=e=>fetch("http://localhost:3000/movies",{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json; charset=UTF-8"}}).then(e=>e.json()).then(e=>e).catch(e=>console.log(e)),c=document.querySelector(".form-data"),i=document.querySelector(".backdrop-add");c.addEventListener("submit",e=>{e.preventDefault(),i.classList.add("is-hidden"),d({title:`${c.elements.name.value}`,genre:`${c.elements.genre.value}`,director:`${c.elements.director.value}`,year:`${c.elements.year.value}`})});const m=document.querySelector(".backdrop-add"),u=document.querySelector(".add-movie"),h=document.querySelector(".close-modal");u.addEventListener("click",e=>{e.preventDefault(),m.classList.remove("is-hidden")}),h.addEventListener("click",e=>{e.preventDefault(),m.classList.add("is-hidden")}),fetch("http://localhost:3000/movies").then(e=>e.json()).then(e=>{t(e),l(),o(),r()});
//# sourceMappingURL=index.9f48437e.js.map
